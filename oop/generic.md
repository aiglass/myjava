### generic æ³›å‹
æ³›å‹ä»jdk1.5å¼€å§‹ä½¿ç”¨ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è§£å†³ClassCastExceptionã€‚javaå‘ä¸‹è½¬å‹æ°¸è¿œéƒ½å¯èƒ½å­˜åœ¨æœ‰å®‰å…¨éšæ‚£ï¼Œjavaå¸Œæœ›é€šè¿‡æ³›å‹æ…¢æ…¢å‡å°‘é—®é¢˜ã€‚

#### æ³›å‹çš„éœ€æ±‚

å‡è®¾ï¼šå®šä¹‰ä¸€ä¸ªæè¿°xã€yåæ ‡çš„å¤„ç†ç±»ï¼Œå¹¶ä¸”è¿™ä¸ªç±»ä¸­å…è®¸æŠ¥é”™å¤šç§æ•°æ®ç±»å‹
-   æ•´å‹ï¼šx=10 y=20
-   æµ®ç‚¹å‹ï¼šx=10.1 y=20.9
-   å­—ç¬¦ä¸²å‹ï¼šx=ä¸œç»120åº¦ y=åŒ—çº¬30åº¦  

è®¾è®¡ï¼š  
**åŸå§‹çš„åšæ³•**  
åˆ©ç”¨objectç±»è¿›è¡Œå®šä¹‰ï¼Œåˆ©ç”¨è½¬å‹å…³ç³»å¯å®ç°
-   æ•´å‹ï¼šint->Integer->int
-   æµ®ç‚¹å‹ï¼šfloat->Floter->float
-  å­—ç¬¦ä¸²å‹ï¼šString->è‡ªåŠ¨è½¬ä¸ºå¯¹è±¡    

é—®é¢˜ï¼šåˆ©ç”¨objectæ–¹æ³•ç¼–è¯‘æ—¶ä¸ä¼šå‡ºé”™ï¼Œè€Œç¨‹åºæ‰§è¡Œæ—¶ä¼šå‡ºç°â€œClassCastExceptionâ€å¼‚å¸¸ç±»å‹ï¼Œæ‰€ä»¥æœ¬ç¨‹åºæ˜¯å­˜åœ¨å®‰å…¨éšæ‚£çš„ã€‚ç”±äºobjectèƒ½æ¥æ”¶çš„èŒƒå›´å¤ªå¹¿ï¼Œæ‰€ä»¥è¦æƒ³åŠæ³•é¿å…å‘ä¸‹è½¬å‹çš„å‡ºç°ã€‚

#### æ³›å‹çš„å®šä¹‰
å¦‚æœè¦é¿å…â€œClassCastExceptionâ€ï¼Œæœ€ç›´æ¥çš„åŠæ³•æ˜¯é¿å…å‡ºç°å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚jdk1.5å¼€å§‹åº”ç”¨çš„æ³›å‹æŠ€æœ¯ï¼Œå¯ä»¥èµ·åˆ°è¿™ç§ä½œç”¨ã€‚  
æ³›å‹çš„æœ¬è´¨åœ¨äºï¼Œ**ç±»ä¸­çš„å±æ€§ä¸æ–¹æ³•çš„å‚æ•°ä¸è¿”å›å€¼çš„ç±»å‹å¯ä»¥ç”±å¯¹è±¡å®ä¾‹åŒ–ä¹‹æ—¶åŠ¨æ€è®¾ç½®**ã€‚  

**æ³›å‹æ ‡è®°**ï¼šåœ¨ç±»å®šä¹‰çš„æ—¶å€™ä½¿ç”¨å®šä¹‰å ä½ç¬¦ï¼ˆæ³›å‹æ ‡è®°ï¼‰ã€‚  
```
class A <T>{
    public T say(T t){return t;}}
public class genericDemo {
    public static void main(String[] args) {
        A<Integer> a=new A<Integer>();
        System.out.println(a.say(1));
        A<String> b=new A<String>();
        System.out.println(b.say("æˆ‘æ˜¯b"));}}
```
-   \<T>  Tè¡¨ç¤ºtypeçš„ç®€å†™
-   å®ä¾‹åŒ–å¯¹è±¡å¯¹è±¡æ—¶ä½¿ç”¨Integerå°±ä¼šå°†Tå…¨éƒ¨æ›¿æ¢ä¸ºIntegerï¼ˆå¹¶å±€é™åœ¨è¯¥å¯¹è±¡ä¸­ï¼‰
-   å¦‚æœè®¾ç½®çš„å†…å®¹ä¸ç¬¦åˆç±»å‹è¦æ±‚ï¼Œç¼–è¯‘å°±ä¼šæç¤ºé”™è¯¯
-   å¹¶ä¸”é¿å…äº†å¯¹è±¡çš„å‘ä¸‹è½¬å‹å¤„ç†ï¼Œä¹Ÿå°±é¿å…äº†ç±»å‹ä¸èƒ½æŒ‡å®šçš„å®‰å…¨éšæ‚£
-   æ³›å‹åªæ”¯æŒå¼•ç”¨æ•°æ®ç±»å‹
-   å¤§éƒ¨åˆ†çš„ç±»å¯¹è±¡çš„å¼ºåˆ¶è½¬æ¢å¤„ç†ï¼Œä½¿ç”¨æ³›å‹
-   jdk1.7ä¹‹åå¯ä»¥new Class<>()è¿›è¡Œç®€å†™  

*æç¤º*ï¼šå…³äºé»˜è®¤çš„æ³›å‹ã€‚ï¼ˆæ³›å‹å±äºjdk1.5ä¹‹åçš„äº§ç‰©ï¼Œä¸ºäº†ä¿éšœ1.5ä¹‹å‰ç¨‹åºçš„æ¥å£æˆ–ç±»åœ¨å‡ºç°æ³›å‹ä¹‹åï¼ŒåŸå§‹çš„ç¨‹åºç±»ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œåœ¨ä¸è®¾ç½®æ³›å‹çš„æƒ…å†µä¸‹ä¿éšœç¨‹åºçš„æ­£å¸¸æ‰§è¡Œï¼Œé»˜è®¤ä¸ºobjectç±»ã€‚ä½†æ˜¯ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šå‡ºç°è­¦å‘Šwarningï¼‰
#### æ³›å‹é€šé…ç¬¦
è™½ç„¶æ³›å‹è§£å†³äº†æ•°æ®ç±»å‹çš„è½¬æ¢é—®é¢˜ï¼Œä½†æ˜¯åˆäº§ç”Ÿäº†æ–°çš„é—®é¢˜ï¼Œå¼•ç”¨ä¼ é€’é—®é¢˜ã€‚
æ€è€ƒğŸ¤”ï¼Ÿä¸€ä¸ªæ–¹æ³•ä¸­ä¼ å…¥å¤šç§æ•°æ®ç±»å‹ï¼Œæ€ä¹ˆæï¼Ÿ

-   å¦‚æœæ¥æ”¶æ–¹æ³•ä¸­ä¸æŒ‡å®šæ³›å‹ï¼Œåˆ™ä¼šæœ‰æ•°æ®ä¿®æ”¹çš„æ¼æ´ï¼Œå¯ä»¥å¯¹ä¼ å…¥çš„æ•°æ®è¿›è¡Œç»Ÿä¸€çš„ä¿®æ”¹
-   æƒ³è¦ä½¿ç”¨æ³›å‹ï¼Œåœ¨é¢å¯¹å¤šç§ç±»å‹æ—¶åªæœ‰ä½¿ç”¨æ³›å‹é€šé…ç¬¦â€œï¼Ÿâ€
-   "?"é€šé…ç¬¦çš„åŸºç¡€ä¸Šå®é™…è¿˜æä¾›äº†ä¸¤ç±»å°çš„é€šé…ç¬¦
    -   ?extends ç±»ï¼šè®¾ç½®æ³›å‹çš„ä¸Šé™åˆ¶
        > ä¾‹å¦‚ï¼š?extends Number:è¡¨ç¤ºåªèƒ½ä½¿ç”¨Numberæˆ–Numberçš„å­ç±»
    -   ?super ç±»ï¼šè®¾ç½®æ³›å‹çš„ä¸‹é™åˆ¶
        > ä¾‹å¦‚ï¼š?super String:åªèƒ½ä½¿ç”¨Stringæˆ–å…¶çˆ¶ç±»
```
class A <T>{
    private T letter;
    public A(T letter){this.letter=letter;}
    public void setLetter(T letter) {this.letter = letter;}
    public T say(){return this.letter;}    
}
public class genericDemo {
    public static void main(String[] args) {
        A<Integer> a=new A<>(1);
        find(a);
    }
    public static void find(A<?> lettr){
        //letter.setLetter(1.1);
        System.out.println(lettr.say());}}
```
#### æ³›å‹æ¥å£
æ³›å‹å¯ä»¥åœ¨ç±»ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨æ¥å£ä¸­ä½¿ç”¨
```
interface IMessage<T>{
    public String echo(T t);}
```
å¯¹æ³›å‹æ¥å£çš„å­ç±»æœ‰ä¸¤ç§å®ç°æ–¹å¼
```
//æ–¹å¼ä¸€ï¼šå­ç±»ä¸­ç»§ç»­è®¾ç½®æ³›å‹å®šä¹‰
class MessageImp1<S>implements IMessage<S>{
    public String echo(S t){return "[echo]"+t;}}
//æ–¹å¼äºŒï¼šåœ¨å­ç±»å®ç°çˆ¶æ¥å£çš„æ—¶å€™ç›´æ¥å®šä¹‰æ•°æ®ç±»å‹
class MessageImp2 implements IMessage<String>{
    public String echo(String t){return "[echo]"+t;}}
```
#### æ³›å‹æ–¹æ³•
åœ¨ä¹‹å‰çš„ç¨‹åºç±»ä¸­å¯ä»¥å‘ç°æ³›å‹æ ‡è®°å†™åˆ°æ–¹æ³•ä¸­ï¼Œè¿™æ ·çš„æ–¹æ³•å°±æ˜¯æ³›å‹æ–¹æ³•ã€‚  
**æ³›å‹æ–¹æ³•ä¸ä¸€å®šå‡ºç°åœ¨æ³›å‹ç±»ä¸­**  
åæœŸå¼€å‘ä¸­ï¼Œæ³›å‹æ–¹æ³•éå¸¸å¸¸è§
```
public class Demo{
    public static void main(String args[]){
        sysout(fun("123"));}
    public static <T> T[] fun(T...args){
        return args;}}
```
###### ä¼ ç»Ÿå·¥å‚è®¾è®¡æ¨¡å¼é€šè¿‡æ³›å‹ä¼˜åŒ–
![å±å¹•å¿«ç…§ 2019-12-09 ä¸‹åˆ1.05.19](http://mysource.moneygc.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-12-09%20%E4%B8%8B%E5%8D%881.05.19.png)

é€šè¿‡æ³›å‹ä¼˜åŒ–:åœ¨è¿”å›æ—¶ç”¨ï¼ˆTï¼‰è¿›è¡Œé™å®š
```
class FoodFactory{
    public static <T> T eatFood(String classname){
        System.out.println(classname);
        if("bread".equals(classname)){
            return (T) new Bread();
        }else{
            return (T) new Nofood();
        }
    }
}
```